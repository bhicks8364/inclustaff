<!--<div>-->
<!--  <ul class="widget-users row" data-behavior="timesheet-list">-->
<!--    <% @timesheets.this_week.each do |timesheet| %>-->
<!--				<li class="col-md-6" data-behavior="timesheet" data-id="<%= timesheet.id %>">-->
<!--				<div class="details">-->
<!--				  <div class="btn-group-vertical pull-left" role="group" aria-label="...">-->
<!--								<%= link_to "<i class='fa fa-folder-open'></i>".html_safe, timesheet, class: "btn btn-primary btn-sm" %>-->
<!--                <%= link_to "<span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>".html_safe, edit_timesheet_path(timesheet), class: "btn btn-primary btn-sm" %>-->
<!--                <%= link_to "<span class='glyphicon glyphicon-trash' aria-hidden='true'></span>".html_safe, timesheet, method: :delete, class: "btn btn-primary btn-sm", data: { confirm: 'Are you sure?' } %>-->
<!--          </div>-->
				    
<!--								<div class="name">-->
<!--										<%= link_to timesheet.employee.name, timesheet.employee %>-->
<!--								</div>-->
<!--								<div class="pay">-->
<!--								  <%= timesheet.reg_hours %>  |  <%= timesheet.ot_hours %>-->
<!--                      <%= number_to_currency(timesheet.gross_pay) %>-->
<!--								</div>-->
<!--								<div class="time">-->
<!--									<i class="fa fa-clock-o"></i> Last in: <%= time_ago_in_words(timesheet.last_clock_in) %> -->
<!--								</div>-->
<!--							  <div data-behavior="timesheet-state">	-->
<!--															  <%= button_tag(type: "button", class: 'btn btn-success btn-sm', data: { behavior: "timesheet-toggle" }) do %>-->
<!--                        <span data-behavior="approve-button"> -->
<!--                        <% if timesheet.approved? %>-->
<!--                          <i class='fa fa-times'></i>     Unapprove-->
<!--                        <% else %>-->
<!--                          <i class='fa fa-check-circle'></i>     Approve-->
<!--                        <% end %>-->
<!--                        </span>-->
<!--                  <% end %>-->
<!--									<%if timesheet.approved? %>-->
<!--                    <span class="label label-success">-->
<!--                      <%= timesheet.state.titleize %>-->
<!--                     </span>-->
<!--                  <% else %>-->
<!--                     <span class="label label-primary">-->

<!--                        <%= timesheet.state.titleize %>-->
<!--                     </span>-->
<!--                    <% end %>-->
<!--                    </div>-->
<!--							<div class="btn-group-vertical" role="group" aria-label="...">-->
<!--								<%= link_to "<i class='fa fa-folder-open'></i>".html_safe, timesheet, class: "btn btn-primary btn-sm" %>-->
<!--                <%= link_to "<span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>".html_safe, edit_timesheet_path(timesheet), class: "btn btn-primary btn-sm" %>-->
<!--                <%= link_to "<span class='glyphicon glyphicon-trash' aria-hidden='true'></span>".html_safe, timesheet, method: :delete, class: "btn btn-primary btn-sm", data: { confirm: 'Are you sure?' } %>-->
<!--              </div>-->
<!--            </div>-->
<!--				</li>-->
<!--    <% end %>-->
<!--	</ul>-->

<!--</div>-->



    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <h1><%= @company.name %>'s Timesheets</h1>

    <% if @timesheets.any? && @timesheets.this_week.any? %>
  <h3> This week timesheets <small>Week ending <%= @timesheets.this_week.first.week_ending %></small></h3>
<h5>Payroll cost: <%= number_to_currency(@timesheets.this_week.sum(:gross_pay)) %></h5>
<div class="table-responsive" data-behavior="timesheet-list">
  <table id="timesheets" class="table" cellspacing="0.5" width="85%">
  <thead>
    <tr>
      <th>Employee</th>
      <th>Title</th>
      <th>Reg/OT Hrs</th>
      <th>Gross pay</th>
      <th>Approved by</th>
      <th>Status</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @timesheets.this_week.each do |timesheet| %>
      <% if timesheet.clocked_in? %>
        <tr class="clocked_in" data-behavior="timesheet" data-id="<%= timesheet.id %>">
      <% else %>
        <tr class="clocked_out" data-behavior="timesheet" data-id="<%= timesheet.id %>">
      <% end %>
        <td><%= link_to timesheet.employee.name, timesheet.employee %></td>
        <td><%= link_to timesheet.job.title, timesheet.job %></td>
        <td><%= timesheet.reg_hours %>  |  <%= timesheet.ot_hours %></td>
        <td><%= number_to_currency(timesheet.gross_pay) %></td>
        <td data-behavior="approve-user"><p><%= timesheet.user_approved %></p></td>
        <td class="text-center" data-behavior="timesheet-state">
          <%if timesheet.approved? %>
          <span class="label label-success">
           <% else %>
           <span class="label label-primary">
            <% end %>
              <%= timesheet.state.titleize %>
           </span>
           
        </td>
        
        <td>
          <%if timesheet.approved? %>
          
          <%= button_tag(type: "button", class: 'btn btn-primary btn-sm', data: { behavior: "timesheet-toggle" }) do %>
            <span data-behavior="approve-button"> 
              <% if timesheet.approved? %>
                <i class='fa fa-times'></i>     Unapprove
              <% else %>
                <i class='fa fa-check-circle'></i>     Approve
              <% end %>
            </span>
          <% end %>

           <% else %>
            
          <%= button_tag(type: "button", class: 'btn btn-success btn-sm', data: { behavior: "timesheet-toggle" }) do %>
            <span data-behavior="approve-button"> 
              <% if timesheet.approved? %>
                <i class='fa fa-times'></i>     Unapprove
              <% else %>
                <i class='fa fa-check-circle'></i>     Approve
              <% end %>
            </span>
          <% end %>

        <% end %>

        </td>
        <td><%= link_to "<i class='fa fa-folder-open'></i>     View".html_safe, timesheet, class: "btn btn-primary btn-sm" %></td>
        <td><%= link_to "<span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>".html_safe, edit_timesheet_path(timesheet) %></td>
        <td><%= link_to "<span class='glyphicon glyphicon-trash' aria-hidden='true'></span>".html_safe, timesheet, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>


<% end %>

<br>

    <%= link_to 'Back to Company Page', @company, class: "btn btn-default" %>
    

<!--     <% if @timesheets.any? && @timesheets.last_week.any? %>-->
<!--  <h3> Last week's timesheets <small>Week ending <%= @timesheets.last_week.first.week_ending %></small></h3>-->

<!--<h5>Payroll cost: <%= number_to_currency(@timesheets.last_week.sum(:gross_pay)) %></h5>-->
<!--<div class="table-responsive">-->
<!--  <table id="timesheets" class="table" cellspacing="0.5" width="85%">-->
<!--  <thead>-->
<!--    <tr>-->
<!--      <th>Employee</th>-->
<!--      <th>Title</th>-->
<!--      <th>Regular</th>-->
<!--      <th>Overtime</th>-->
<!--      <th>Gross pay</th>-->
<!--      <th>Shifts</th>-->
<!--      <th></th>-->
<!--      <th></th>-->
<!--      <th></th>-->
<!--    </tr>-->
<!--  </thead>-->

<!--  <tbody>-->
<!--    <% @timesheets.last_week.each do |timesheet| %>-->
<!--      <% if timesheet.clocked_in? %>-->
<!--        <tr class="clocked_in">-->
<!--      <% else %>-->
<!--        <tr class="clocked_out">-->
<!--      <% end %>-->
<!--        <td><%= link_to timesheet.employee.name, timesheet.employee %></td>-->
<!--        <td><%= link_to timesheet.job.title, timesheet.job %></td>-->
<!--        <td><%= timesheet.reg_hours %></td>-->
<!--        <td><%= timesheet.ot_hours %></td>-->
<!--        <td><%= number_to_currency(timesheet.gross_pay) %></td>-->
<!--        <td><%= timesheet.shifts.count %></td>-->
<!--        <% if timesheet.approved? %>-->
<!--        <td><%= timesheet.state.titleize %> </td>-->
<!--        <% else %>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-ok-circle' aria-hidden='true'></span>    Approve".html_safe, approve_timesheet_path(timesheet), method: :patch, remote: true %></td>-->
<!--        <% end %>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-info-sign' aria-hidden='true'></span>     View".html_safe, timesheet, class: "btn btn-default btn-sm" %></td>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>".html_safe, edit_timesheet_path(timesheet) %></td>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-trash' aria-hidden='true'></span>".html_safe, timesheet, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
<!--      </tr>-->
<!--    <% end %>-->
<!--  </tbody>-->
<!--</table>-->
<!--</div>-->


<!--<% end %>-->

<!--     <% if @timesheets.any? && @timesheets.any? %>-->
<!--  <h3> All timesheets </h3>-->

<!--<h5>Payroll cost: <%= number_to_currency(@timesheets.sum(:gross_pay)) %></h5>-->
<!--<div class="table-responsive">-->
<!--  <table id="timesheets" class="table" cellspacing="0.5" width="85%">-->
<!--  <thead>-->
<!--    <tr>-->
<!--      <th>Employee</th>-->
<!--      <th>Title</th>-->
<!--      <th>Regular</th>-->
<!--      <th>Overtime</th>-->
<!--      <th>Gross pay</th>-->
<!--      <th>Shifts</th>-->
<!--      <th></th>-->
<!--      <th></th>-->
<!--      <th></th>-->
<!--    </tr>-->
<!--  </thead>-->

<!--  <tbody>-->
<!--    <% @timesheets.each do |timesheet| %>-->
<!--      <% if timesheet.clocked_in? %>-->
<!--        <tr class="clocked_in">-->
<!--      <% else %>-->
<!--        <tr class="clocked_out">-->
<!--      <% end %>-->
<!--        <td><%= link_to timesheet.employee.name, timesheet.employee %></td>-->
<!--        <td><%= link_to timesheet.job.title, timesheet.job %></td>-->
<!--        <td><%= timesheet.reg_hours %></td>-->
<!--        <td><%= timesheet.ot_hours %></td>-->
<!--        <td><%= number_to_currency(timesheet.gross_pay) %></td>-->
<!--        <td><%= timesheet.shifts.count %></td>-->
<!--        <% if timesheet.approved? %>-->
<!--        <td><%= timesheet.state.titleize %> </td>-->
<!--        <% else %>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-ok-circle' aria-hidden='true'></span>    Approve".html_safe, approve_timesheet_path(timesheet), method: :patch, remote: true %></td>-->
<!--        <% end %>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-info-sign' aria-hidden='true'></span>     View".html_safe, timesheet, class: "btn btn-default btn-sm" %></td>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>".html_safe, edit_timesheet_path(timesheet) %></td>-->
<!--        <td><%= link_to "<span class='glyphicon glyphicon-trash' aria-hidden='true'></span>".html_safe, timesheet, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
<!--      </tr>-->
<!--    <% end %>-->
<!--  </tbody>-->
<!--</table>-->
<!--</div>-->


<!--<% end %>-->
    


