<div class='btn-group'>
	<%= link_to "Edit Multiple", edit_multiple_admin_timesheets_path, class: "btn btn-info" %>
	<%= link_to "New Timesheet", new_admin_timesheet_path, class: "btn btn-info" %>
</div>
<div class="col-md-12">
<h1>Edit Multiple</h1>
<hr>
    <%= div_for @timesheets, class: "col-md-12" do |timesheet| %>
    
        <div class="col-md-12 <%= timesheet.approved? ? "approved" : "" %>" data-behavior="timesheet" data-id="<%= timesheet.id %>" id="timesheet_<%=timesheet.id%>">
            <h3><%= timesheet.time_frame %></h3>
            <h2><%= timesheet.name %> <span class='small pull-right text-muted' id='timesheet_<%=timesheet.id%>_state'><%=timesheet.state.upcase%></span> </h2>
        <%= simple_form_for( [:admin, timesheet]) do |f| %>
           <div class='form-group'>
                <% if timesheet.shifts.any? %>
                    <%= f.input :reg_hours, inline_label: 'Regular', wrapper_html: { class: 'col-md-4'}, input_html: { class: 'form-control'}, disabled: true  %>
                    <%= f.input :ot_hours, label: 'Overtime', wrapper_html: { class: 'col-md-4'}, input_html: { class: 'form-control'}, disabled: true  %>
                <% else %>
                    <%= f.input :reg_hours, label: 'Regular', wrapper_html: { class: 'col-md-4'}, input_html: { class: 'form-control'}  %>
                    <%= f.input :ot_hours, label: 'Overtime', wrapper_html: { class: 'col-md-4'}, input_html: { class: 'form-control'}  %>
                <%= hidden_field_tag :redirect_to, @redirect_to %>
               
                <% end %>
            </div>
    	      <div class='timesheet-actions btn-group col-md-4'>
    	          <span id='btn_<%=timesheet.id%>' class='small'><%= link_to "Approve".html_safe, approve_admin_timesheet_path(timesheet), class: "btn btn-default", method: :patch, remote: true, data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Saving..."} if timesheet.pending? %></span>
        	     <% if timesheet.shifts.none? %>
        	     <%= f.button :button, "Save".html_safe, class: "btn btn-info inline", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Saving..."} %>
        	     <% else %>
        	     <%= link_to "Delete All Shifts", admin_timesheet_delete_all_shifts_path(timesheet, redirect_to: "edit_multiple_admin_timesheets_path"), class: 'btn btn-primary'%>
        	         <%= link_to "Edit #{pluralize(timesheet.shifts.count, "shift")}", admin_timesheet_shifts_path(timesheet), class: "btn btn-info inline" %>
        	     <% end %>
                </div>
            <% end %>
        </div>
    <% end %>

</div>